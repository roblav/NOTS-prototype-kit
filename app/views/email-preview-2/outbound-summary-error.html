
{% extends "layout.html" %}

{% block pageTitle %}
  Home â€“ GOV.UK Prototype Kit
{% endblock %}

{% block content %}

{% from "govuk/components/notification-banner/macro.njk" import govukNotificationBanner %}

{% set html %}
  <p class="govuk-notification-banner__heading">
    Error: Issue with Open Text generating PDF
  </p>
  <p class="govuk-body">
    Please raise this issue on DWP Place
  </p>
{% endset %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">  

      {# {{ govukNotificationBanner({
        html: html
      }) }} #}

      <div class="govuk-notification-banner govuk-notification-banner--error" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
        <div class="govuk-notification-banner__header">
          <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
            Error
          </h2>
        </div>
        <div class="govuk-notification-banner__content">
          <h3 class="govuk-notification-banner__heading">
            Error: Issue with Open Text generating PDF
          </h3>
          <p class="govuk-body">Please raise this issue on DWP Place</p>
        </div>
      </div>

      <h1 class="govuk-heading-xl">
        Outbound Summary
      </h1>
      <dl class="govuk-summary-list">
  
    
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Template
          </dt>
          <dd class="govuk-summary-list__value">
            Generic Notification
          </dd>
          
            <dd class="govuk-summary-list__actions">
              
                <a class="govuk-link" href="select-template">
                  Change<span class="govuk-visually-hidden"> name</span>
                  </a>
              
            </dd>
          
        </div>
    
  
    
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Recipient
          </dt>
          <dd class="govuk-summary-list__value">
            Mr John Doe (Ni Number) AC974512A
          </dd>
          
            <dd class="govuk-summary-list__actions">
              
                <a class="govuk-link" href="select-recipient">
                  Change<span class="govuk-visually-hidden"> date of birth</span>
                  </a>
              
            </dd>
          
        </div>
    
  
    
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Language
          </dt>
          <dd class="govuk-summary-list__value">
            English
          </dd>
          
            <dd class="govuk-summary-list__actions">
              
                <a class="govuk-link" href="template-placeholders">
                  Change<span class="govuk-visually-hidden"> address</span>
                  </a>
              
            </dd>
          
        </div>
    
  
      
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            Placeholders
          </dt>
          <dd class="govuk-summary-list__value">
            <table class="govuk-table">
                          <tbody class="govuk-table__body"><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">Customer Title</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">Mr</td>
                              </tr><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">First Name</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">Jack</td>
                              </tr><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">Last Name</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">Sparrow</td>
                              </tr><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">Notification Name</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">something</td>
                              </tr><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">URL</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">www.bob.com</td>
                              </tr><tr class="govuk-table__row">
                              <td scope="row" style="color:#505a5f">Agent Name</td>
                              <td class="govuk-table__cell" style="border-bottom:none;">Mr Smith</td>
                              </tr> </tbody>
                          </table>
          </dd>
          
            <dd class="govuk-summary-list__actions">
              
                <a class="govuk-link" href="template-placeholders">
                  Change<span class="govuk-visually-hidden"> contact details</span>
                  </a>
              
            </dd>
          
        </div>
    
  
      </dl>
      <div class="govuk-button-group">
  
        <button class="govuk-button" data-module="govuk-button">
          Confirm and send
        </button>

        <span class="govuk-!-margin-right-2"></span>
        <a href="#cancel-popup" class="govuk-link govuk-body outbound-move-down-8">
          Cancel
        </a>
      </div>
    </div>
    <div class="govuk-grid-column-one-third">
        
      <div class="govuk-body">
          <h2 class="govuk-heading-s">Send notification: step by step</h2>
          <div class="govuk-body outbound-side-nav-heading">
            Check what you need to do to send a notification to someone
          </div>
          <div class="govuk-details__text outbound-side-nav-element outbound-selected-item">
            <h3 class="govuk-!-font-weight-bold">Select customer</h3>
            <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
              Search for a customer via National Insurance number
            </div>
          </div>
          <div class="govuk-details__text outbound-side-nav-element outbound-selected-item">
            <h3 class="govuk-!-font-weight-bold">Select template</h3>
            <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
              Search and select template. <br>
              Enter the required placeholders.
            </div>
          </div>
          <div class="govuk-details__text outbound-side-nav-element ">
            <h3 class="govuk-!-font-weight-bold">Summary and send</h3>
            <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
              Check the details entered and click 'Send'
            </div>
          </div>
        </div>  

    </div>
  </div>

{% endblock %}

{% block pageScripts %}
<script>
  // If absolute URL from the remote server is provided, configure the CORS
  // header on that server.
  // var url = 'https://raw.githubusercontent.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf';
  var url = '/public/pdf/b1d9d1ea-c575-414a-b750-57734ef6c86.pdf';

  // Loaded via <script> tag, create shortcut to access PDF.js exports.
  var pdfjsLib = window['pdfjs-dist/build/pdf'];

  // The workerSrc property shall be specified.
  pdfjsLib.GlobalWorkerOptions.workerSrc = '//mozilla.github.io/pdf.js/build/pdf.worker.js';

  // Asynchronous download of PDF
  var loadingTask = pdfjsLib.getDocument(url);
  loadingTask.promise.then(function(pdf) {
    console.log('PDF loaded');
    
    // Fetch the first page
    var pageNumber = 1;
    pdf.getPage(pageNumber).then(function(page) {
      console.log('Page loaded');
      
      var scale = 1.5;
      var viewport = page.getViewport({scale: scale});

      // Prepare canvas using PDF page dimensions
      var canvas = document.getElementById('the-canvas');
      var context = canvas.getContext('2d');
      canvas.height = viewport.height;
      canvas.width = viewport.width;

      // Render PDF page into canvas context
      var renderContext = {
        canvasContext: context,
        viewport: viewport
      };
      var renderTask = page.render(renderContext);
      renderTask.promise.then(function () {
        console.log('Page rendered');
      });
    });
  }, function (reason) {
    // PDF loading error
    console.error(reason);
  });
</script>
{% endblock %}