{% extends "layout.html" %}

{% block pageTitle %}
  Home â€“ GOV.UK Prototype Kit
{% endblock %}

{% block content %}

  <script src="//mozilla.github.io/pdf.js/build/pdf.js"></script>

  <div class="govuk-breadcrumbs">
    <ol class="govuk-breadcrumbs__list">

      <li class="govuk-breadcrumbs__list-item">
        <a class="govuk-breadcrumbs__link" href="welcome">Dashboard</a>
      </li>
  
      <li class="govuk-breadcrumbs__list-item" aria-current="page">Sending new notification</li>
      
    </ol>
  </div>

  <a href="welcome" class="govuk-back-link">Back</a>

  <div class="govuk-grid-row">

    <div class="govuk-grid-column-two-thirds">
      <h1 class="govuk-heading-m">Enter placeholders for 'Generic Notification'</h1>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00001">
            1. Customer Title
          </label>

          <div id="ID00001-hint" class="govuk-hint">
            The customer's title
          </div>

          <input class="govuk-input" id="ID00001" name="Customer Title" type="text" aria-describedby="ID00001-hint">
        </div>

      </div>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00002">
            2. First Name
          </label>

          <div id="ID00002-hint" class="govuk-hint">
            The customer's preferred first name
          </div>

          <input class="govuk-input" id="ID00002" name="First Name" type="text" aria-describedby="ID00002-hint">
        </div>

      </div>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00003">
            3. Last Name
          </label>

          <div id="ID00003-hint" class="govuk-hint">
            The customer's preferred last name
          </div>

          <input class="govuk-input" id="ID00003" name="Last Name" type="text" aria-describedby="ID00003-hint">
        </div>

      </div>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00004">
            4. Notification Name
          </label>

          <div id="ID00004-hint" class="govuk-hint">
            Name of the attachment
          </div>

          <input class="govuk-input" id="ID00004" name="Notification Name" type="text" aria-describedby="ID00004-hint">
        </div>

      </div>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00005">
            5. URL
          </label>

          <div id="ID00005-hint" class="govuk-hint">
            URL of the attachment
          </div>

          <input class="govuk-input" id="ID00005" name="URL" type="text" aria-describedby="ID00005-hint">
        </div>

      </div>

      <div class="govuk-!-display-inline-block tma-vertical-align govuk-!-width-full govuk-!-padding-right-2">

        <div class="govuk-form-group">
          <label class="govuk-label govuk-label govuk-label--s govuk-!-margin-bottom-2" for="ID00006">
            6. Agent Name
          </label>

          <div id="ID00006-hint" class="govuk-hint">
            The name of the Agent sending the notification
          </div>

          <input class="govuk-input" id="ID00006" name="Agent Name" type="text" aria-describedby="ID00006-hint">
        </div>

      </div>

      <div class="govuk-button-group">

        <button class="govuk-button" data-module="govuk-button">
          Continue
        </button>

        <span class="govuk-!-margin-right-2"></span>
        <a href="#cancel-popup" class="govuk-link govuk-body outbound-move-down-8">
          Cancel
        </a>

      </div>

      <ul>
        <li><a href="outbound-summary" class="govuk-link govuk-body">Preview created</a></li>
        <li><a href="outbound-summary-error" class="govuk-link govuk-body">Error with NOTs</a></li>
      </ul>

    </div>
    <div class="govuk-grid-column-one-third">

      <div class="govuk-body">
        <h2 class="govuk-heading-s">Send notification: step by step</h2>
        <div class="govuk-body outbound-side-nav-heading">
          Check what you need to do to send a notification to someone
        </div>
        <div class="govuk-details__text outbound-side-nav-element outbound-selected-item">
          <h3 class="govuk-!-font-weight-bold">Select customer</h3>
          <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
            Search for a customer via National Insurance number
          </div>
        </div>
        <div class="govuk-details__text outbound-side-nav-element outbound-selected-item">
          <h3 class="govuk-!-font-weight-bold">Select template</h3>
          <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
            Search and select template.
            <br>
            Enter the required placeholders.
          </div>
        </div>
        <div class="govuk-details__text outbound-side-nav-element ">
          <h3 class="govuk-!-font-weight-bold">Summary and preview</h3>
          <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
            Check the details entered and preview email
          </div>
        </div>
        <div class="govuk-details__text outbound-side-nav-element ">
          <h3 class="govuk-!-font-weight-bold">Send</h3>
          <div class="govuk-hint" style="font-size:15px;margin-right:25px;">
            Check the preview and 'Send'
          </div>
        </div>
      </div>

    </div>
  </div>

{% endblock %}

{% block pageScripts %}
  <script>
    // If absolute URL from the remote server is provided, configure the CORS
    // header on that server.
    // var url = 'https://raw.githubusercontent.com/mozilla/pdf.js/ba2edeae/examples/learning/helloworld.pdf';
    var url = '/public/pdf/b1d9d1ea-c575-414a-b750-57734ef6c86.pdf';

    // Loaded via <script> tag, create shortcut to access PDF.js exports.
    var pdfjsLib = window['pdfjs-dist/build/pdf'];

    // The workerSrc property shall be specified.
    pdfjsLib.GlobalWorkerOptions.workerSrc = '//mozilla.github.io/pdf.js/build/pdf.worker.js';

    // Asynchronous download of PDF
    var loadingTask = pdfjsLib.getDocument(url);
    loadingTask
      .promise
      .then(function (pdf) {
        console.log('PDF loaded');

        // Fetch the first page
        var pageNumber = 1;
        pdf
          .getPage(pageNumber)
          .then(function (page) {
            console.log('Page loaded');

            var scale = 1.5;
            var viewport = page.getViewport({scale: scale});

            // Prepare canvas using PDF page dimensions
            var canvas = document.getElementById('the-canvas');
            var context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;

            // Render PDF page into canvas context
            var renderContext = {
              canvasContext: context,
              viewport: viewport
            };
            var renderTask = page.render(renderContext);
            renderTask
              .promise
              .then(function () {
                console.log('Page rendered');
              });
          });
      }, function (reason) {
        // PDF loading error
        console.error(reason);
      });
  </script>
{% endblock %}